# AtCoder Beginner Contest 121

* [atcoder](https://atcoder.jp/contests/abc121)

## 参加時の感想

A, B, C は一瞬で終わったが、 D の TLE で時間短縮方法が思いつかず。

## D 問題

> 問題文
>
> f(A, B) を A, A + +1, ..., B の排他的論理和としたとき、
> f(A, B) を求めてください。
>
> 制約
>
> 入力は全て整数である。
> 0 ≤ A ≤ B ≤ 10^12

とりあえず解法が分かったので、下記にメモします。
AtCoder で AC することは確認しました。

1 から a - 1 と b 番目までの xor を算出します。
その後、両者の xor を取得することで求まります。
xor の場合は、 N 番目までの xor を求めるのであれば、
各 bit に現れる 1 が奇数か偶数かを求めれば良いです。
N 番目までに任意の bit に 1 が現れる回数は、下記で計算できます。

1. 任意の bit を b とする。
1. b ビットのみが 1 となる値 (2^b) よりも小さい値は影響しない
1. 2^b よりも大きい値の時は、 n = (N - (2^b - 1)) を求める。
  これ以降の値では、 2^b を塊として、
  1 と 0 を繰り返す。
1. floor(n / 2^b) の値が奇数の場合は、 0 の塊にいるので、
  任意の bit b は、 0 となる。
1. floor(n / 2^b) の値が偶数の場合は、 1 の塊にいる。
  したがって、 n % 2^b が奇数ならば 1 となる。

| fig. 1       |
| :-:          |
| ![][fig_xor] |

[fig_xor]: docs/xor_world.png

